# –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ "–£—Ä–æ–≤–Ω–∏ –±–æ–Ω—É—Å–æ–≤" –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ v2

## üîç –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–ù–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ 100500 –¥–ª—è v2 (http://192.168.0.12:5173/v2/test/type100500) –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ "–£—Ä–æ–≤–Ω–∏ –±–æ–Ω—É—Å–æ–≤" –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Ä–æ–≤–Ω–µ–π: Request failed with status code 500" –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –æ–ø—Ü–∏–∏ "–ù–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö".

---

## üìÅ –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –°—Ç–∞—Ä–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- `frontend/src/components/types/Type100500/index.vue` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å —Ä–∞–±–æ—á–∏–º –º–æ–¥–∞–ª–æ–º
- `frontend/src/services/uploader.ts` - —Ñ—É–Ω–∫—Ü–∏—è `fetchBonusLevels()` (—Å—Ç—Ä–æ–∫–∏ 441-475)
- `server/index.js` - API endpoint `/api/admin/bonus-form` (—Å—Ç—Ä–æ–∫–∏ 223-246)

### –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v2:
- `frontend/src/components/common/modals/LevelsModal.vue` - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ (–∑–∞–≥–ª—É—à–∫–∞)
- `frontend/src/components/level-system-v2/bases/controls/BonusLevelsControl.vue` - –∫–æ–Ω—Ç—Ä–æ–ª-–ø–∞–Ω–µ–ª—å
- `frontend/src/components/level-system-v2/bases/fields/tableRenderers.ts` - —Ä–µ–Ω–¥–µ—Ä—ã –ø–æ–ª–µ–π (—Å—Ç—Ä–æ–∫–∏ 188-210)
- `frontend/src/components/level-system-v2/components/LevelUploadPage.vue` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å—Ç—Ä–æ–∫–∏ 70-92)
- `frontend/src/components/level-system-v2/store/index.ts` - store v2
- `frontend/src/composables/useTestConfig.ts` - —Ç–µ—Å—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `frontend/src/composables/useTestConfigV2.ts` - —Ç–µ—Å—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

---

## üìä –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (—Ä–∞–±–æ—á–∞—è)

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ñ–∞–π–ª—ã
1. **`Type100500/index.vue`** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º
2. **`services/uploader.ts`** - —Ñ—É–Ω–∫—Ü–∏—è `fetchBonusLevels()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —É—Ä–æ–≤–Ω–µ–π
3. **`server/index.js`** - API endpoint `/api/admin/bonus-form` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Ä–æ–≤–Ω–µ–π

#### 1. API –≤—ã–∑–æ–≤ (`uploader.ts:441-475`)
```typescript
export async function fetchBonusLevels(
  domain: string,
  gameid: string | number,
  level: string | number
): Promise<Array<{ label: string; name: string }>> {
  const urlForm = `/api/admin/bonus-form?domain=${encodeURIComponent(
    domain
  )}&gid=${encodeURIComponent(String(gameid))}&level=${encodeURIComponent(
    String(level)
  )}`
  const res = await axios.get(urlForm, { withCredentials: true })
  const htmlText = res.data as string
  const parser = new DOMParser()
  const doc = parser.parseFromString(htmlText, 'text/html')
  const inputs = Array.from(doc.querySelectorAll('input[name^="level_"]')) as HTMLInputElement[]
  // ... –ø–∞—Ä—Å–∏–Ω–≥ —á–µ–∫–±–æ–∫—Å–æ–≤ –∏–∑ HTML
}
```

#### 2. –°–µ—Ä–≤–µ—Ä–Ω—ã–π endpoint (`server/index.js:223-246`)
```javascript
app.get('/api/admin/bonus-form', async (req, res) => {
  const { domain, gid, level } = req.query
  const url = `https://${domain}.en.cx/Administration/Games/BonusEdit.aspx?gid=${gid}&level=${level}&bonus=0&action=save`

  const proxyRes = await axios.get(url, {
    headers: { Cookie: req.session.authCookie },
  })
  res.status(200).send(proxyRes.data)
})
```

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤ —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (`Type100500/index.vue:223-270`)

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –î–≤–µ –æ–ø—Ü–∏–∏: "–ù–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö" / "–ù–∞ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö"
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —É—Ä–æ–≤–Ω–µ–π –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∏ "–û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ" –∏ "–û–±–Ω–æ–≤–∏—Ç—å"
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –∏–ª–∏ –º–∞—Å—Å–æ–≤–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
- **–ú–∞—Å—Å–æ–≤–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: `openLevelsModal('bulk')` (—Å—Ç—Ä–æ–∫–∞ 79)
- **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**: `openLevelsModal('row', row)` (—Å—Ç—Ä–æ–∫–∞ 149)

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Type100500/index.vue:442-457):**
```typescript
async function refreshLevels() {
  try {
    loadingLevels.value = true
    const list = await fetchBonusLevels(store.domain, store.gameId, store.levelId)
    availableLevels.value = list
  } catch (e: any) {
    notify.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Ä–æ–≤–Ω–µ–π', e.message || String(e))
  } finally {
    loadingLevels.value = false
  }
}
```

---

## üî¨ –ê–Ω–∞–ª–∏–∑ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã v2 (–ø—Ä–æ–±–ª–µ–º–Ω–∞—è)

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 1. LevelsModal.vue (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–¥–∞–ª–∞)
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–≥–ª—É—à–∫—É –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ API

```typescript
// –°—Ç—Ä–æ–∫–∏ 151-175 - –ó–ê–ì–õ–£–®–ö–ê!
async function loadAvailableLevels() {
  loading.value = true
  error.value = ''

  try {
    // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤—ã–∑–æ–≤ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —É—Ä–æ–≤–Ω–µ–π
    // –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–≥–ª—É—à–∫—É
    await new Promise(resolve => globalThis.setTimeout(resolve, 500))

    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏
    availableLevels.value = Array.from({ length: 20 }, (_, i) => ({
      label: `–£—Ä–æ–≤–µ–Ω—å ${i + 1}`,
      value: String(i + 1)
    }))

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ–º —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
    if (!selectedLevels.value.includes(props.currentLevel)) {
      selectedLevels.value.push(props.currentLevel)
    }
  } catch (_err) {
    error.value = '–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Ä–æ–≤–Ω–µ–π'
  } finally {
    loading.value = false
  }
}
```

#### 2. BonusLevelsControl.vue (–∫–æ–Ω—Ç—Ä–æ–ª-–ø–∞–Ω–µ–ª—å)
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LevelsModal, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–π –º–æ–¥–∞–ª

#### 3. tableRenderers.ts (—Ä–µ–Ω–¥–µ—Ä—ã —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã)
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ù–ï –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –º–æ–¥–∞–ª—É

```typescript
// –°—Ç—Ä–æ–∫–∏ 188-192 - –ó–ê–ì–õ–£–®–ö–ê!
export const renderBonusLevels: FieldRenderer = ({ data }) => {
  const openLevelsModal = (): void => {
    console.log('–û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤—ã–±–æ—Ä–∞ —É—Ä–æ–≤–Ω–µ–π –¥–ª—è:', data)
    // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è LevelsModal
  }
  // ...
}
```

#### 4. LevelUploadPage.vue (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
**–°—Ç–∞—Ç—É—Å**: ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

```typescript
// –°—Ç—Ä–æ–∫–∏ 74-82 - –ü–†–û–ë–õ–ï–ú–ê!
if (!levelV2Store.domain) {
  levelV2Store.domain = 'test'  // ‚Üê Hardcoded "test"!
}
if (!levelV2Store.gameId) {
  levelV2Store.gameId = 'test'  // ‚Üê Hardcoded "test"!
}
if (!levelV2Store.levelId) {
  levelV2Store.levelId = '1'
}
```

---

## üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä –∏ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è

| –ê—Å–ø–µ–∫—Ç | –°—Ç–∞—Ä–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v2 |
|--------|-------------------|---------------------|
| **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | ‚úÖ –†–µ–∞–ª—å–Ω—ã–π `fetchBonusLevels()` | ‚ùå –ó–∞–≥–ª—É—à–∫–∞ —Å `setTimeout()` |
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** | ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è | ‚ùå Hardcoded "test" –∑–Ω–∞—á–µ–Ω–∏—è |
| **–ú–æ–¥–∞–ª –≤ –∫–æ–Ω—Ç—Ä–æ–ª-–ø–∞–Ω–µ–ª–∏** | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç | ‚úÖ –û—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç |
| **–ú–æ–¥–∞–ª –≤ —Å—Ç—Ä–æ–∫–∞—Ö —Ç–∞–±–ª–∏—Ü—ã** | ‚úÖ –û–¥–Ω–æ –∏ —Ç–æ –∂–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ | ‚ùå –ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω |
| **–ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å"** | ‚úÖ –ï—Å—Ç—å | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | ‚úÖ –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | ‚ùå –¢–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Å–æ–ª—å |
| **–ü–æ–ª—É—á–µ–Ω–∏–µ credentials** | ‚úÖ –ò–∑ store (domain, gameId) | ‚ùå Hardcoded –∏–ª–∏ –ø—É—Å—Ç—ã–µ |

---

## üïµÔ∏è –ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏ 500

### Root cause –∞–Ω–∞–ª–∏–∑:
1. **–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ v2** –ø–µ—Ä–µ–¥–∞–µ—Ç `domain='test'`, `gameId='test'` –≤ API
2. **–°–µ—Ä–≤–µ—Ä** –ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ `https://test.en.cx/Administration/Games/BonusEdit.aspx?gid=test&level=1`
3. **–î–æ–º–µ–Ω test.en.cx –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** ‚Üí –æ—à–∏–±–∫–∞ —Å–µ—Ç–∏ ‚Üí HTTP 500
4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç**: "Request failed with status code 500"

### –ö–æ–Ω—Ç—Ä–∞—Å—Ç —Å–æ —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
- –°—Ç–∞—Ä–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (`VITE_TEST_DOMAIN`, `VITE_TEST_GAME_ID`)
- –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–µ–ª–∞–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ **—Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–º–µ–Ω—É**
- API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üö® –ü—Ä–æ–±–ª–µ–º–∞ —Å –¥–≤—É–º—è –≤–∏–¥–∞–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í—ã—è–≤–ª–µ–Ω–∞ –ø—É—Ç–∞–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

#### –†–µ–∂–∏–º 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **URL**: http://192.168.0.12:5173/
- **Credentials**: `test/test` (–¥–µ–º–æ –¥–æ—Å—Ç—É–ø—ã)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å UI —Å—Ç—Ä–∞–Ω–∏—Ü –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫

#### –†–µ–∂–∏–º 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ —É—Ä–æ–≤–Ω–µ–π (–æ–±—Ö–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- **URL**: http://192.168.0.12:5173/v2/test/type100500
- **Credentials**: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`VITE_TEST_*`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É—Ä–æ–≤–Ω–µ–π —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ API

### –ü—Ä–æ–±–ª–µ–º–∞ –≤ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:
**–†–µ–∂–∏–º 2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –†–µ–∂–∏–º–∞ 1!**
- `domain='test'` –≤–º–µ—Å—Ç–æ `VITE_TEST_DOMAIN`
- `gameId='test'` –≤–º–µ—Å—Ç–æ `VITE_TEST_GAME_ID`

---

## üîß –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –≤ LevelsModal.vue
**–§–∞–π–ª**: `frontend/src/components/common/modals/LevelsModal.vue`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `fetchBonusLevels` –∏–∑ `@/services/uploader`
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç store v2 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `domain`, `gameId`, `levelId`
3. ‚úÖ –ó–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫—É –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API –≤—ã–∑–æ–≤
4. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å" –≤ footer
5. ‚úÖ –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (–ø–æ–∫–∞–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)

```typescript
// –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
import { fetchBonusLevels } from '@/services/uploader'
import { useLevelV2Store } from '@/components/level-system-v2/store'

const store = useLevelV2Store()

async function loadAvailableLevels() {
  loading.value = true
  error.value = ''

  try {
    const levels = await fetchBonusLevels(store.domain, store.gameId, store.levelId)
    availableLevels.value = levels.map(level => ({
      label: level.label,
      value: level.label
    }))
  } catch (err) {
    error.value = `–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Ä–æ–≤–Ω–µ–π: ${err.message}`
  } finally {
    loading.value = false
  }
}
```

### –≠—Ç–∞–ø 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ LevelUploadPage.vue
**–§–∞–π–ª**: `frontend/src/components/level-system-v2/components/LevelUploadPage.vue`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `useTestConfigV2`
2. ‚úÖ –£–¥–∞–ª–∏—Ç—å hardcoded –∑–Ω–∞—á–µ–Ω–∏—è `'test'`
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```typescript
import { useTestConfigV2 } from '@/composables/useTestConfigV2'

onMounted(() => {
  if (typeId.value && config.value) {
    // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ credentials –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    const { getTestCredentialsV2 } = useTestConfigV2()
    const credentials = getTestCredentialsV2()

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º store –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    levelV2Store.domain = credentials.domain
    levelV2Store.gameId = credentials.gameId
    levelV2Store.levelId = credentials.levelId

    levelV2Store.initializeLevelType(
      typeId.value as LevelTypeId,
      subtypeConfig.value || subtype.value,
      true
    )
  }
})
```

### –≠—Ç–∞–ø 3: –ü–æ–¥–∫–ª—é—á–∏—Ç—å –º–æ–¥–∞–ª –≤ tableRenderers.ts
**–§–∞–π–ª**: `frontend/src/components/level-system-v2/bases/fields/tableRenderers.ts`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º —Å–≤—è–∑–∏ –º–µ–∂–¥—É renderer –∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º
2. ‚úÖ –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å callback –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç
3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∏ –≤ –º–æ–¥–∞–ª

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:**
- **–í–∞—Ä–∏–∞–Ω—Ç A**: –ü–µ—Ä–µ–¥–∞—á–∞ callback —á–µ—Ä–µ–∑ props —Ä–µ–Ω–¥–µ—Ä–∞
- **–í–∞—Ä–∏–∞–Ω—Ç B**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ event bus
- **–í–∞—Ä–∏–∞–Ω—Ç C**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ provide/inject

### –≠—Ç–∞–ø 4: –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å" –≤ LevelsModal
**–§–∞–π–ª**: `frontend/src/components/common/modals/LevelsModal.vue`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å" –≤ footer template
2. ‚úÖ –ü—Ä–∏–≤—è–∑–∞—Ç—å –∫ —Ñ—É–Ω–∫—Ü–∏–∏ `loadAvailableLevels`
3. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

### –≠—Ç–∞–ø 5: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–æ —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
**–¶–µ–ª—å**: –û–±–µ—Å–ø–µ—á–∏—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–¥–∞–ª–∞

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. ‚úÖ –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π
2. ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã
3. ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (`allLevels` / `targetLevels`)

### –≠—Ç–∞–ø 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞
1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –æ–±–æ–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –º–æ–¥–∞–ª–∞ (–º–∞—Å—Å–æ–≤—ã–π + –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π)
3. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ API
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–æ —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

---

## üìã –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. **`LevelsModal.vue`** - –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API
2. **`LevelUploadPage.vue`** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. **`tableRenderers.ts`** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–∞–ª–∞ –≤ —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã

### –í–æ–∑–º–æ–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
4. **`BonusLevelsControl.vue`** - –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)
5. **`useLevelV2Store.ts`** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥–∞–ª–æ–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## ‚ö° –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª "–£—Ä–æ–≤–Ω–∏ –±–æ–Ω—É—Å–æ–≤" –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ v2:

### ‚úÖ –ë—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—Ç—å:
- –†–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã –∫ —Å–µ—Ä–≤–µ—Ä—É Encounter
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ 500 –ø—Ä–∏ –≤—ã–±–æ—Ä–µ "–ù–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö"
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ "–û–±–Ω–æ–≤–∏—Ç—å"

### ‚úÖ –ë—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å—Ç–∞—Ä–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
- –î–≤–∞ —Ä–µ–∂–∏–º–∞: "–ù–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö" / "–ù–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö"
- –ú–∞—Å—Å–æ–≤–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ç—Ä–æ–ª-–ø–∞–Ω–µ–ª–∏
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–ª—è —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### ‚úÖ –ë—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞:
- –ï–¥–∏–Ω—ã–π –º–æ–¥–∞–ª –¥–ª—è –æ–±–æ–∏—Ö —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –°–≤—è–∑—å —Å store v2 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è

### –•–æ—Ä–æ—à–∏–µ —Ä–µ—à–µ–Ω–∏—è –≤ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:
- ‚úÖ –í—ã–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ props –∏ events
- ‚úÖ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ö–æ–º–ø–æ–∑–∞–±–ª `useTestConfigV2` –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±—É–¥—É—â–∏—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫:
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –º–æ–¥–∞–ª–∞
- ‚úÖ –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Ä–æ–≤–Ω–µ–π
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∞
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å debounce –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤