# Рефакторинг и оптимизации Encounter Uploader

## Обзор проекта

Encounter Uploader - веб-приложение для загрузки уровней игры Encounter с поддержкой различных типов. Тип уровня - это заранее настроенный пресет полей, заполнив контент которых, пользователь может отправить этот контент в Encounter. Текущие типы уровней:
1. Олимпийки (15, 31, 63, 127 секторов как подтипы)
2. 100500 секторов и бонусов

В будущем планируется 20+ типов уровней для загрузки. У каждого типа будут свой набор полей из общего списка полей, а также своя конфигурация "заливки" этих полей.
Страница заливки является по сути инструментом для наполнения контентом этих полей в рамках выбранного типа уровня для дальнейшей правильной "заливки" (отправки) этого контента в Encounter.

## Ключевые цели рефакторинга
- исключение дублируюшего кода, функций, интерфейса
- максимизация переиспользования (компоненты, поля, элементы интерфейса)
- стандартизация (хранение данных, использование данных, отправка данных)
- упрощение и корректная настройка серверной части
- готовность к легкому добавлению новых типов уровней
- готовность к масштабированию и новому функционалу, который будет подключаться модульно, а не "наростом"

### Предлагается добиться следующими решениями
1. Единый список полей, в которых загружаются данные при "заливке (заданий, секторов, бонусов)". Удобная и практичная регистрация новых полей в общем списке.
2. Единый список контрол-элементов (для массового редактирования таблицы контента).
2. Связывание полей с контрол-элементами из контрол-панели для массового редактирования. К примеру, для поля "Название секторов" (в таблице контента) привязывается контрол-элемент "Название секторов" (в контрол-панели), который будет использоваться только для этого поля. Для привязки нужно проанализировать текущие связи.
3. Унификация всех типов уровней - создание общей архитектуры для Олимпиек, Type100500 и будущих типов. Настройка типов уровней через конфиги. Легкое добавление новых типов уровней, конструктор отправляемых данных через указание нужных полей из общего списка полей
4. Общий шаблон страницы загрузки (за эталонный взять "100500 секторов и бонусов"), состоящий из:
 а) информация о типе уровня (название, данные из настроек на предыдущем шаге, один набор данных)
 б) таблица для заполнения контента для отправки (с настраиваемым списком полей из единого списка)
 в) контрол-панель для массового редактирования полей таблицы контента (привязанные к поля контрол-элементы из единого списка)
 г) нижний бар с кнопками (назад, очистка, экспорт, импорт, предпросмотр, заливка задания, заливка секторов, заливка бонусов, чекбокс "Объединить сектора (БМП)").
 
Постоянные кнопки для всех типов уровней:
Кнопки назад, очистка, экспорт и импорт во всех типах выполняют одинаковые действия и присутствуют всегда.
 
Наличие кнопки зависит от настройки типа уровня и его полей:
 - Кнопка "Предпросмотр" по сути отображает то, что будет отправлено по кнопке "Залить задание", то есть если есть "Залить задание", то и должна быть кнопка "Предпросмотр".
 - Кнопка "Залить задание" в зависимости от типа уровня может иметь разное содержание. Не для всех типов уровней эта кнопка будет нужна.
 - Кнопка "Залить сектора" (с или без чекбокса "Объединить сектора (БМП)" всегда заливают одинаковый набор полей - ответы и их варианты).
 - Кнопка "Залить бонусы" заливает разный набор полей для каждого типа уровня.
5. Четкая стандартизация отправляемых данных, сборщик Payload, для каждого типа уровня свой набор отправляемых полей. Легкое добавление полей в Payload из единого списка полей
6. Исключение backend в пользу server, улучшение настройки при необходимости

### Тестирование и проверка проекта
Необходимо не допустить изменение интерфейса UI (потеря стилей, перестановка блоков, ошибка в верстке и т.д.). Для проверки что "ничего не поехало и все работает не хуже, чем до выполнения рефакторинга" предлагается тестировать интерфейс. Чтобы не задействовать функции проверки авторизации и ID игры, добавлены тестовый логин и пароль: test/test.
Для каждого шага рефакторинга, который так или иначе может касаться интерфейса предлагается смотреть как выглядят основные страницы (авторизация, настройка, "Олимпийка 127" и "100500 секторов и бонусов") с использованием playwright после шага рефакторинга, справнивая как выглядели до.

### Документации к модулям, плагинам и прочему
При работе с каким-либо модулем, плагином и т.п. (например, при установке или при использовании новых функций, которые еще не были задействованы) необходимо обращаться к документации этого моделя или плагина с помощью context7!

## План рефакторинга
составить...

### Необходимые библиотеки, модули или плагины
указать...